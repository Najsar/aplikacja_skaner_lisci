<html lang="pl-PL">
    <head>
        <title>Dźwięki zwierząt</title>
        <meta charset="utf-8">
        <style>
            body {
                background-image: url('images/background.png');
                background-position: center;
                background-size: 100% 100%;
                overflow: hidden;
                position: absolute;
                width: 100%;
                height: 100%;
                display: flex;
                justify-content: center;
                align-items: center;
            }
            .main {
                height: 30%;
                width: 38%;
                display: none;
            }
            #dark-screen {
                height: 100%;
                width: 100%;
                position: relative;
                right: 8px;
                bottom: 8px;
                background-color: black;
            }
        </style>
    </head>
    <body>
        <div id="dark-screen" tabindex="0"></div>
        <div class="main" id="main">
            <div id="start_screen" style="display: block; position:relative; right:20%; bottom: 10%;">
                <img src="images/start_screen.png" height="120%" width="140%" onclick="start()">
            </div>
            <div id="start" style="display: none; position:relative; right:20%; bottom: 10%;">
                <img src="images/start.png" height="100%" width="140%">
            </div>
            <div id="round1" style="display: none; position:relative; right:20%">
                <img src="images/round1.png" height="100%" width="140%">
            </div>
            <div id="round1-questions" style="display: none; position:relative; right:55%; bottom: 30%; height:120%; width:210%">
                <img src="images/round1_1.png" height="100%" width="22%" style="float:left;margin: 5px;" onclick="retry(1,1,this)">
                <img src="images/round1_2.png" height="100%" width="22%" style="float:left;margin: 5px;" onclick="retry(1,2,this)">
                <img src="images/round1_3.png" height="100%" width="22%" style="float:left;margin: 5px;" onclick="ok(1,3,this)">
                <img src="images/round1_4.png" height="100%" width="22%" style="float:left;margin: 5px;" onclick="retry(1,4,this)">
                <img src="images/retry.png" id="round1-retry" height="50%" width="50%" style="display: none; margin: 5px; position:relative; left: 21%; top: 5%;">
                <img src="images/congratulation.png" id="round1-ok" height="40%" width="50%" style="display: none; margin: 5px; position:relative; left: 21%; top: 5%;">
            </div>
            <div id="round2" style="display: none; position:relative; right:20%">
                <img src="images/round2.png" height="100%" width="140%">
            </div>
            <div id="round2-questions" style="display: none; position:relative; right:55%; bottom: 30%; height:120%; width:210%">
                <img src="images/round2_1.png" height="100%" width="22%" style="float:left;margin: 5px;" onclick="retry(2,1,this)">
                <img src="images/round2_2.png" height="100%" width="22%" style="float:left;margin: 5px;" onclick="retry(2,2,this)">
                <img src="images/round2_3.png" height="100%" width="22%" style="float:left;margin: 5px;" onclick="ok(2,3,this)">
                <img src="images/round2_4.png" height="100%" width="22%" style="float:left;margin: 5px;" onclick="retry(2,4,this)">
                <img src="images/retry.png" id="round2-retry" height="50%" width="50%" style="display: none; margin: 5px; position:relative; left: 21%; top: 5%;">
                <img src="images/congratulation.png" id="round2-ok" height="40%" width="50%" style="display: none; margin: 5px; position:relative; left: 21%; top: 5%;">
            </div>
            <div id="round3" style="display: none; position:relative; right:20%">
                <img src="images/round3.png" height="100%" width="140%">
            </div>
            <div id="round3-questions" style="display: none; position:relative; right:55%; bottom: 30%; height:120%; width:210%">
                <img src="images/round3_1.png" height="100%" width="22%" style="float:left;margin: 5px;" onclick="retry(3,1,this)">
                <img src="images/round3_2.png" height="100%" width="22%" style="float:left;margin: 5px;" onclick="retry(3,2,this)">
                <img src="images/round3_3.png" height="100%" width="22%" style="float:left;margin: 5px;" onclick="retry(3,3,this)">
                <img src="images/round3_4.png" height="100%" width="22%" style="float:left;margin: 5px;" onclick="ok(3,4,this)">
                <img src="images/retry.png" id="round3-retry" height="50%" width="50%" style="display: none; margin: 5px; position:relative; left: 21%; top: 5%;">
                <img src="images/congratulation.png" id="round3-ok" height="40%" width="50%" style="display: none; margin: 5px; position:relative; left: 21%; top: 5%;">
            </div>
            <div id="round4" style="display: none; position:relative; right:20%">
                <img src="images/round4.png" height="100%" width="140%">
            </div>
            <div id="round4-questions" style="display: none; position:relative; right:55%; bottom: 30%; height:120%; width:210%">
                <img src="images/round4_1.png" height="100%" width="22%" style="float:left;margin: 5px;" onclick="ok(4,1,this)">
                <img src="images/round4_2.png" height="100%" width="22%" style="float:left;margin: 5px;" onclick="retry(4,2,this)">
                <img src="images/round4_3.png" height="100%" width="22%" style="float:left;margin: 5px;" onclick="retry(4,3,this)">
                <img src="images/round4_4.png" height="100%" width="22%" style="float:left;margin: 5px;" onclick="retry(4,4,this)">
                <img src="images/retry.png" id="round4-retry" height="50%" width="50%" style="display: none; margin: 5px; position:relative; left: 21%; top: 5%;">
                <img src="images/congratulation.png" id="round4-ok" height="40%" width="50%" style="display: none; margin: 5px; position:relative; left: 21%; top: 5%;">
            </div>
            <div id="end" style="display: none; position:relative; right:20%; bottom:80%">
                <img src="images/end.png" height="250%" width="140%">
            </div>
        </div>
        <script src="js/jquery-3.4.1.min.js"></script>
        <script>
            $( document ).ready(function() {
                $( "#dark-screen" ).keydown(function() {
                    $( "#dark-screen" ).hide();
                    $( "#main" ).show();
                });
            });
            var ok_status = 0;
            var nok = [];
            nok[0] = 0;
            nok[1] = 0;
            nok[2] = 0;
            var playing = 0;
            song1 = new Audio('songs/1.mp3'); 
            song2 = new Audio('songs/2.mp3');
            song3 = new Audio('songs/3.mp3');
            song4 = new Audio('songs/4.mp3');
            song1.addEventListener('ended', function() {
                this.currentTime = 0;
                this.play();
            }, false);
            song2.addEventListener('ended', function() {
                this.currentTime = 0;
                this.play();
            }, false);
            song3.addEventListener('ended', function() {
                this.currentTime = 0;
                this.play();
            }, false);
            song4.addEventListener('ended', function() {
                this.currentTime = 0;
                this.play();
            }, false);

            function retry(question, answer, element) {
                if(ok_status == 0) {
                    $('#round'+question+'-ok').hide();
                    $('#round'+question+'-retry').show();
                    if(nok[0] == 0) {
                        nok[0] = element;
                        nok[1] = question;
                        nok[2] = answer;
                        $(element).attr('src', 'images/round'+question+'_'+answer+'nok.png');
                    }
                    else {
                        $(nok[0]).attr('src', 'images/round'+nok[1]+'_'+nok[2]+'.png');
                        $(element).attr('src', 'images/round'+question+'_'+answer+'nok.png');
                        nok[0] = element;
                        nok[1] = question;
                        nok[2] = answer;
                    }
                }
            }
            function ok(question, answer, element) {
                if(ok_status == 0) {
                    $('#round'+question+'-retry').hide();
                    $('#round'+question+'-ok').show();
                    if(nok[0] == 0) {
                        $(element).attr('src', 'images/round'+question+'_'+answer+'ok.png');
                    }
                    else {
                        $(nok[0]).attr('src', 'images/round'+nok[1]+'_'+nok[2]+'.png');
                        $(element).attr('src', 'images/round'+question+'_'+answer+'ok.png');
                    }
                    ok_status = 1;
                    if(playing == 1) {
                        song1.pause();
                    }
                    if(playing == 2) {
                        song2.pause();
                    }
                    if(playing == 3) {
                        song3.pause();
                    }
                    if(playing == 4) {
                        song4.pause();
                    }
                    setTimeout(function() {
                        $(element).attr('src', 'images/round'+question+'_'+answer+'.png');
                        if(question == 4) {
                            $('#round'+question+'-questions').hide();
                            $('#end').show();
                            setTimeout(function() {
                                $('#end').hide();
                                $('#start_screen').show();

                                $( "#main" ).hide();
                                $( "#dark-screen" ).show();
                            }, 5000);
                        }
                        else {
                            $('#round'+question+'-questions').hide();
                            $('#round'+(Number(question)+1)).show();
                            setTimeout(function() {
                                if(playing == 1 && question == 1) {
                                    song2.play();
                                    playing = 2;
                                }
                                if(playing == 2 && question == 2) {
                                    song3.play();
                                    playing = 3;
                                }
                                if(playing == 3 && question == 3) {
                                    song4.play();
                                    playing = 4;
                                }
                                if(playing == 4 && question == 4) {
                                    playing = 0;
                                }
                                $('#round'+(Number(question)+1)).hide();
                                $('#round'+(Number(question)+1)+'-questions').show();
                            }, 2000);
                        }
                        ok_status = 0;
                    }, 2000);
                }
            }
            function start() {
                $('#round1-retry').hide();
                $('#round2-retry').hide();
                $('#round3-retry').hide();
                $('#round4-retry').hide();

                $('#round1-ok').hide();
                $('#round2-ok').hide();
                $('#round3-ok').hide();
                $('#round4-ok').hide();

                $('#start_screen').hide();
                $('#start').show();
                setTimeout(function() {
                    $('#start').hide();
                    $('#round1').show();
                    setTimeout(function() {
                        $('#round1').hide();
                        $('#round1-questions').show();
                        song1.play();
                        playing = 1;
                    }, 2000);
                }, 3000);
                
            }
        </script>
    </body>
</html>